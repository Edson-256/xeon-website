---
import { getCollection } from 'astro:content';
import PageLayout from '../../layouts/PageLayout.astro';

const especialidades = await getCollection('especialidades');
const sortedEspecialidades = especialidades.sort((a, b) => a.data.order - b.data.order);
---

<PageLayout
  title="Especialidades"
  description="Conheça as áreas de atuação da clínica em oncologia cirúrgica. Tratamento especializado e humanizado."
  breadcrumbItems={[{ label: 'Especialidades' }]}
>
  <section class="intro">
    <p>
      Nossa clínica é especializada em oncologia cirúrgica, com foco em
      tratamentos que combinam excelência técnica com cuidado humanizado.
      Conheça nossas áreas de atuação.
    </p>
  </section>

  <section class="specialties-list">
    {sortedEspecialidades.map((entry) => (
      <article class="specialty-card">
        <h2 class="specialty-card__title">
          <a href={`/especialidades/${entry.slug}/`}>{entry.data.title}</a>
        </h2>
        <p class="specialty-card__excerpt">{entry.data.excerpt}</p>
        <a href={`/especialidades/${entry.slug}/`} class="specialty-card__link">
          Saiba mais
          <span aria-hidden="true">&rarr;</span>
        </a>
      </article>
    ))}
  </section>

  <section class="cta">
    <h2>Não encontrou sua condição?</h2>
    <p>
      Entre em contato conosco para saber se podemos ajudar com o seu caso.
      Cada paciente é único e merece atenção personalizada.
    </p>
    <a href="/agende/" class="btn btn--primary">
      Falar com nossa equipe
    </a>
  </section>
</PageLayout>

<style>
  section {
    margin-bottom: 3rem;
  }

  .intro p {
    font-size: 1.25rem;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    color: var(--color-text-secondary);
    line-height: 1.6;
  }

  .specialties-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
  }

  .specialty-card {
    background: var(--color-surface-alt);
    border-radius: 0.75rem;
    padding: 2rem;
    border-left: 4px solid var(--color-primary);
    transition: box-shadow 0.2s, transform 0.2s;
    height: 100%;
    display: flex;
    flex-direction: column;
  }

  .specialty-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
  }

  .specialty-card__title {
    font-size: 1.5rem;
    margin-bottom: 1rem;
    font-family: var(--font-serif);
  }

  .specialty-card__title a {
    color: var(--color-text);
    text-decoration: none;
  }

  .specialty-card__title a:hover {
    color: var(--color-primary);
  }

  .specialty-card__excerpt {
    color: var(--color-text-secondary);
    margin-bottom: 1.5rem;
    flex-grow: 1;
    line-height: 1.6;
  }

  .specialty-card__link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    text-decoration: none;
    color: var(--color-primary);
    margin-top: auto;
  }

  .specialty-card__link:hover {
    text-decoration: underline;
  }

  .cta {
    text-align: center;
    padding: 3rem 2rem;
    background: var(--color-surface-alt);
    border-radius: 1rem;
    margin-top: 4rem;
  }

  .cta h2 {
    margin-bottom: 1rem;
    font-family: var(--font-serif);
  }

  .cta p {
    color: var(--color-text-secondary);
    margin-bottom: 2rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
  }
</style>